---
title: "An R training course for understanding perception data"
#author: "Moonbin Jo - Sébastien Lê"
date: ''
output:
  html_document:
    theme: united
    css: style.css
    highlight: tango
mainfont: SourceSansPro
header-includes:
- \usepackage[default]{sourcesanspro}
- \usepackage[T1]{fontenc}
---

By defintion, perception is the process by which individuals interpret and make sense of sensory information from their environment. It involves the brain's ability to organize and understand sensory input, such as visual, auditory, tactile, olfactory, and gustatory sensations.

A *bottom-up approach to statistical analysis* refers to a method or strategy in which data analysis is initiated by examining individual data points before drawing broader conclusions or patterns. In this approach, you start with the raw data and build up to understanding larger trends or insights.

In other words, instead of beginning with a preconceived hypothesis or theory, you start with the actual data and gradually analyze and synthesize the information to uncover patterns, relationships, and trends that might not have been apparent at first glance.

In the context of statistics, a bottom-up approach emphasizes data exploration, visualization, and understanding before formulating hypotheses or making generalizations. It is a way to let the data guide the analysis process, rather than imposing preconceived ideas onto the data.

The objectives of this series of exercises are manifold. They aim to assist students, scientists, and researchers interested in perception data in making the most of such data, analyzing them using R and developing a statistical mindset. Making the most of perception data entails understanding how to formulate research questions and determining what insights to glean from the data.

This course in its current form was made possible by the work of MoonBin Jo of SNU, under the supervision of JaeHee Hong and Sébastien Lê, and is also the result of several years of teaching and exchange with colleagues. A big thank you to Marie Pierre Etienne for designing the website. A huge thank you also to the students at the Institut Agro Rennes Angers who collected the data: Achille Gausserès, Alexia Gueguen, Solène Gueguen, Eric Kapisiz, Laureline Lespinasse, Claire Pelletier, Roméo Renier.


```{r setup-TD_liste, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, cache= FALSE, eval = TRUE, fig.show='hide', message = FALSE, warning = FALSE, results = 'markup' )
library(tidyverse)
library(kableExtra)
liste_td  <- list.files(pattern = '.Rmd')  


ll <- lapply(liste_td, function(f){
  if(! (f %in% c("vocabulaire.Rmd", "index.Rmd") ) ){
    print(f)
    td_content <- tibble(text = readLines(f) ) %>% 
      mutate(Session = str_remove(f, pattern = '.Rmd')) %>% 
      filter(str_detect(text, "title:")) %>%
      mutate(Sessions = str_remove(text, pattern = "title: [\'\"]"))    %>% 
      mutate(Sessions = str_sub(Sessions, start = 1, end = -2)) %>% 
      mutate(index = as.numeric(str_sub(Session, start =3))) %>% 
      select(-text)
    return(td_content)}
})


liste_complete <- do.call('rbind', ll) %>% 
  mutate(Session_url = paste0(Session, '.html')) %>% 
  arrange(index) %>% 
  select(-index)


```

# {.tabset .tabset-fade .tabset-pills}


## Sessions

```{r echo = FALSE, eval = TRUE, results='markup'}

liste_complete %>%
  mutate(Link = cell_spec(Session, "html", link = Session_url)) %>% 
  select(-Session_url)    %>%
  select(-Session) %>% 
  kable("html", escape = FALSE) %>%
  collapse_rows(columns = 1, valign = 'top') %>%
  kable_classic(full_width = F, html_font = "Helvetica")

```

## Scripts and data

### Scripts

- [S1_script.R](S1_script.R) : The R script for Session 1.
- [S2_script.R](S2_script.R) : The R script for Session 2.
- [S3_script.R](S3_script.R) : The R script for Session 3.
- [S4_script.R](S4_script.R) : The R script for Session 4.
- [S5_script.R](S5_script.R) : The R script for Session 5.
- [S6_script.R](S6_script.R) : The R script for Session 6.

### Data

- [Perception data - participant based](data_final.csv) perception data for environmental habits.
- [Perception data - constraint score based](data_long_score.csv) perception data for environmental habits, but modified for the scores of the habits to be the rows of the data, not the participants.
- [Perception data - constraint score based and modified](data_long_score_t.csv) long data that is modified specifically for Sessions 3, 4, and 5. For more information about how this modification was done, see Session 3.

## Index vocabulary


```{r setup-TDvocabulaire, include=FALSE, results='hide'}
knitr::opts_chunk$set(echo = FALSE, cache= FALSE, eval = TRUE, fig.show='hide', message = FALSE, warning = FALSE, results = 'markup' )
library(tidyverse)
library(kableExtra)
liste_td <- list.files(pattern = '.Rmd')
liste_td <- liste_td[which(! (liste_td%in% c("vocabulaire.Rmd", "index.Rmd")))]

print(liste_td)

ll <- lapply(liste_td, function(f){
    print(f)
    vocabulaire <- tibble(text = readLines(f) ) %>%
      mutate(Session = str_remove(f, pattern = '.Rmd')) %>%
      slice((which(str_detect(text, "Vocabulary"))+1):n()) %>%
      filter(!(text == ''))

    themes <-  vocabulaire %>%
      filter(str_detect(text, '###')) %>%
      mutate(text = str_remove(text, '###')) %>%
      mutate(text = trimws(text)) %>%
      pull(text)

    sep <- which(str_detect(vocabulaire$text, pattern = paste(themes, collapse = '|')))
    vocabulaire <- vocabulaire %>%
      rowid_to_column() %>%
      mutate(themes = rep(themes, diff(c(sep, nrow(vocabulaire)+1)))) %>%
      filter(!str_detect(text, pattern = paste(themes, collapse = '|') ) )

    return(vocabulaire)
})


liste_complete <- do.call('rbind', ll) %>% 
  mutate(Vocabulary = str_remove(text, '- ')) %>% 
  dplyr::select(-text) %>%
  select(Vocabulary, themes, Session) %>%
  arrange(Vocabulary) %>%
  mutate(S_url = paste0(Session, '.html')) %>%
  arrange(Vocabulary)


print_liste <- function(theme_choisi){
  liste_complete %>%
  filter(themes == theme_choisi) %>%
  select(-themes) %>%
  kable("html", escape = FALSE) %>%
  collapse_rows(columns = 1, valign = 'top') %>%
  kable_classic(full_width = F, html_font = "Cambria")
}
```

```{r echo = FALSE, eval = TRUE, results='hide'}
liste_complete <- liste_complete %>%
  mutate(Session = cell_spec(Session, "html", link = S_url)) %>%
  select(-S_url)



```



### Statistical terms

```{r stat, echo = FALSE, eval = TRUE, results='markup'}
print_liste('Statistical terms')
```


### R environment

```{r env_R, echo = FALSE, eval = TRUE, results='markup'}
print_liste('R environment')
```


### R commands

```{r commandes_R, echo = FALSE, eval = TRUE, results='markup'}

print_liste('R commands')
```


## Other information

### How to install R and RStudio

**Process of installation :**

* First you [install R](https://cran.r-project.org/)
* and then you install [RStudio](https://www.rstudio.com/products/rstudio/download/).

Boom.

### Resources

**Basic tools for data science - learning the tidyverse**

* [R for Data Science](https://r4ds.had.co.nz)

**For graphics**

*  https://www.r-graph-gallery.com/

R graph gallery is a collection of charts using R, and you can use this site to get inspiration on how to plot your data. The site provides the code so that you can reproduce the graphs you see with your own data.

**Cheatsheets**

* [Data Wrangling Cheatsheet with dplyr and tidyr](https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf)
* [Other Cheatsheets](https://posit.co/resources/cheatsheets/?type=posit-cheatsheets&_page=2/)

However, I do recommend befriending Google when it comes to questions about data analysis. Being able to know what to search for in Google to answer your questions will help you a lot, so start with searching for stuff like "How do I change the names of the columns of a data set **in R**". Always put the words **in R** because if you don't you'll get a lot of information about other computing languages.